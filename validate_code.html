<!DOCTYPE html>
<html>
<head>

<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.21/css/jquery.dataTables.css">
<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>
</head>
<body>
	<div style="text-align:center;font-size:35px;margin-top:100px;"><b>Please Enter Verification Code</b></div>
	<div style="text-align:center;margin-top:20px;border-radius:25px;"><input type="text" id="verification_code"></div>
	<div style="text-align:center;margin-top:20px;"><button onclick="submitVerificationCode();" id="submitVerificationCode">Submit Verification Code</button></div>
	<div style="text-align:center;margin-top:20px;"><button onclick="resendVerificationCode();">Resend Verification Code</button></div>
</body>
</html>
<script>
$(document).ready(function()
{
	<!-- $.ajax -->
	<!-- ({ -->
		<!-- type: "POST", -->
		<!-- url: "applicationManagement.php", -->
		<!-- data:{action:"send_validation_code"}, -->
		<!-- success: function(data) -->
		<!-- { -->
		<!-- } -->
	<!-- }); -->
	
});
var err = 0;
function submitVerificationCode()
{
	$.ajax
	({
		type: "POST",
		url: "applicationManagement.php",
		data:{action:"submit_verification_code",code:$("#verification_code").val()},
		success: function(data)
		{
			err++;
			console.log(err);
			if(data == "Success")
			{
				Swal.fire({html:'Verification Code Validated', icon:'success'}).then(function()
				{
					location.reload();
				});
			}
			if(data == "Error")
			{
				Swal.fire({html:'Incorrect Verification Code', icon:'error'});
				if(err >= 5)
				{
					Swal.fire({html:'The number of incorrect attempts has been exceeded. <br> Please click <b>Resend Verification Code</b>', icon:'error'}).then(function()
					{
						$("#verification_code").prop("disabled",true);
						$("#submitVerificationCode").prop("disabled",true);
						
					});
				}
			}
		}
	});
}
function resendVerificationCode()
{
	
}
</script>